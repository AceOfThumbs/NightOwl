<!-- index.html -->
<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NightOwl ‚Äî UI rethink</title>
    <link rel="stylesheet" href="nightowl.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="app-header">
        <div class="app-title">
          <h1>NightOwl</h1>
          <p class="text-muted">Shift-aware clock and circadian planner</p>
        </div>
        <div class="header-actions">
          <div class="pill-group" role="group" aria-label="Locale display">
            <button id="timezoneToggle" class="pill" type="button"></button>
          </div>
          <div class="control-stack" role="group" aria-label="Interface controls">
            <button id="textScaleDown" class="btn btn-ghost" type="button" aria-label="Decrease text size">Aa‚àí</button>
            <button id="textScaleUp" class="btn btn-ghost" type="button" aria-label="Increase text size">Aa+</button>
            <button id="themeLight" class="btn btn-ghost" type="button" data-theme-choice="light" aria-pressed="false" aria-label="Switch to light mode">‚òÄÔ∏è</button>
            <button id="themeDark" class="btn btn-ghost" type="button" data-theme-choice="dark" aria-pressed="false" aria-label="Switch to dark mode">üåô</button>
          </div>
        </div>
      </header>

      <main class="layout">
        <section class="panel panel-clock" aria-labelledby="clockTitle">
          <header class="panel-head">
            <h2 id="clockTitle">Clock</h2>
            <div class="clock-meta" aria-live="polite">
              <span class="clock-meta__now" id="nowLabel"></span>
              <span class="clock-meta__feels" id="feelsLikeLabel"></span>
            </div>
          </header>
          <div class="clock-stage">
            <div class="day-ring" role="application" aria-label="24-hour planner clock">
              <svg id="dayRing" viewBox="0 0 400 400" aria-hidden="true"></svg>
              <div class="ring-overlay">
                <div class="next-event" id="nextEventLabel" hidden></div>
                <div class="ring-tooltip" id="ringTooltip" hidden></div>
              </div>
            </div>
            <div class="micro-legend" aria-label="Legend">
              <span><span class="legend-dot legend-day"></span>‚òÄÔ∏è day</span>
              <span><span class="legend-dot legend-night"></span>üåô sleep</span>
              <span><span class="legend-dot legend-meal"></span>üçΩÔ∏è meals</span>
              <span><span class="legend-dot legend-move"></span>üßò‚Äç‚ôÄÔ∏è exercise</span>
              <span><span class="legend-dot legend-work"></span>üíº work</span>
            </div>
            <div class="filter-chips" role="group" aria-label="Filter event types">
              <button class="chip chip-active" data-filter="all">All</button>
              <button class="chip" data-filter="sleep">Sleep</button>
              <button class="chip" data-filter="meal">Meals</button>
              <button class="chip" data-filter="exercise">Exercise</button>
              <button class="chip" data-filter="work">Work</button>
              <button class="chip" data-filter="light">Light blocks</button>
            </div>
          </div>
        </section>

        <section class="panel panel-day" aria-labelledby="dayListTitle">
          <header class="panel-head">
            <h2 id="dayListTitle">Your Day</h2>
            <p class="text-muted">Plan anchors for your day. Add items or drag them on the clock.</p>
          </header>
          <div class="list-controls">
            <button id="addViaClock" class="btn btn-secondary" type="button">Pick on clock</button>
            <button id="addDayItem" class="btn btn-primary" type="button">Add item</button>
          </div>
          <ul id="dayList" class="day-list" aria-live="polite"></ul>
        </section>

        <section class="panel panel-nudge" aria-labelledby="nudgeTitle">
          <header class="panel-head">
            <h2 id="nudgeTitle">Nudge Planner</h2>
            <div class="segment" role="radiogroup" aria-label="Nudge direction">
              <button class="segment-btn" data-dir="auto" role="radio" aria-checked="true">Auto</button>
              <button class="segment-btn" data-dir="earlier" role="radio" aria-checked="false">Earlier</button>
              <button class="segment-btn" data-dir="later" role="radio" aria-checked="false">Later</button>
            </div>
          </header>
          <div class="nudge-controls">
            <label class="field">
              <span class="field-label">Target date</span>
              <input id="targetDate" type="date" />
            </label>
            <label class="field">
              <span class="field-label">Plan for</span>
              <select id="plannerMode">
                <option value="wake">Wake time</option>
                <option value="sleep">Sleep time</option>
              </select>
            </label>
            <label class="field">
              <span class="field-label">Adjustment style</span>
              <select id="adjustmentCurve">
                <option value="linear">Linear</option>
                <option value="curved">Curved ease</option>
              </select>
            </label>
            <label class="field">
              <span class="field-label">Time zone</span>
              <select id="timeZone"></select>
            </label>
            <label class="field">
              <span class="field-label">Target <span id="plannerModeLabel">wake</span> time</span>
              <input id="targetTime" type="time" />
            </label>
            <label class="field field-slider">
              <span class="field-label">Max shift per day <span id="dailyStepLabel">¬±30 min</span></span>
              <input id="dailyStep" type="range" min="5" max="120" step="5" aria-describedby="dailyStepHint" />
              <span id="dailyStepHint" class="text-muted">Max change per day applied to target wake/sleep.</span>
            </label>
          </div>
          <div class="nudge-cards" id="nudgeCards" aria-live="polite"></div>
          <div class="nudge-actions">
            <button id="applyPlan" class="btn btn-primary" type="button">Apply to plan</button>
          </div>
        </section>
      </main>

      <section class="panel panel-advanced" aria-labelledby="advancedTitle">
        <header class="panel-head advanced-toggle">
          <button id="advancedToggle" class="btn btn-ghost" type="button" aria-expanded="false" aria-controls="advancedBody">Advanced</button>
        </header>
        <div id="advancedBody" class="advanced-body" hidden>
          <p class="text-muted">Override the current date and time used for calculations.</p>
          <div class="advanced-grid">
            <label class="field">
              <span class="field-label">Override ‚Äúnow‚Äù</span>
              <input id="overrideInput" type="datetime-local" />
            </label>
            <div class="advanced-actions">
              <button id="applyOverride" class="btn btn-secondary" type="button">Apply</button>
              <button id="clearOverride" class="btn btn-ghost" type="button">Clear</button>
            </div>
          </div>
          <div class="text-muted" id="overrideStatus">Using real current time.</div>
        </div>
      </section>

      <div id="toastContainer" class="toast-container" role="status" aria-live="polite" aria-atomic="true"></div>

      <div id="shareLayer" class="share-layer" hidden>
        <div class="share-layer__backdrop" data-share-close></div>
        <div class="share-dialog" role="dialog" aria-modal="true" aria-labelledby="shareDialogTitle">
          <button type="button" class="share-dialog__close" data-share-close aria-label="Close share dialog">√ó</button>
          <h2 id="shareDialogTitle">Share your plan</h2>
          <p class="text-muted">Send this link to share your current schedule. Anyone with the link can load these settings.</p>
          <label class="field">
            <span class="field-label">Share link</span>
            <input id="shareLinkInput" class="share-dialog__input" type="text" readonly />
          </label>
          <div class="share-dialog__buttons">
            <button id="shareCopyLink" class="btn btn-primary" type="button">Copy link</button>
            <button id="shareCopyCode" class="btn btn-secondary" type="button">Copy code</button>
          </div>
          <div>
            <div class="field-label">Share code</div>
            <div id="shareCode" class="share-code" aria-live="polite"></div>
          </div>
        </div>
      </div>
    </div>

    <script src="nightowl.js"></script>
  </body>
</html>

